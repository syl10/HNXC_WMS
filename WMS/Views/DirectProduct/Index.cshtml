<script type="text/javascript">
    $(function () {
        $('#details').datagrid('options').onClickRow = function () {
            $('#SubDetails').datagrid('loadData', { total: 0, rows: [] });
            var row = $('#details').datagrid('getSelected');
            if (row) {
                $('#SubDetails').datagrid({ url: '/DirectProduct/GetSubDetail/?BillNo=' + row.BILL_NO });
//                $('#SubDetails').datagrid('reload');
            }
            else {
                $.messager.show({ title: '系统提示', msg: '失败!请检查原因！' });
            }
        }
    });
</script>

@*直接投料*@

<div region="center" split="true"  border="false" style="border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #99BBE8">    
    <table class="easyui-datagrid" border="false" singleSelect="true" id="details" url = '/DirectProduct/GetDetail/'
        fit="true" fitColumns="true" toolbar="#tool"  pagination="true" rownumbers="true" pageSize="50" striped="true">
        <thead>
            <tr>
                <th field="BILL_NO" width="100">单据号码</th>
                <th field="BILL_DATE" width="80">单据日期</th>
                <th field="SCHEDULE_NO" width="80"  hidden="true">计划单号</th>
                <th field="WAREHOUSE_CODE" width="80" hidden="true">仓库编号</th>
                <th field="WAREHOUSE_NAME" width="80">仓库名称</th>
                <th field="CIGARETTE_CODE" hidden="true"  width="60">牌号代码</th>
                <th field="CIGARETTE_NAME"  width="80">牌号</th>
                <th field="FORMULA_CODE" width="80"  hidden="true" >配方代号</th>
                <th field="FORMULA_NAME" width="80" >配方名称</th>
                <th field="BATCH_WEIGHT" width="80" >批次重量</th>
                <th field="LINE_NO" width="80" hidden="true" >制丝线</th>
                <th field="LINE_NAME" width="80">制丝线</th>
                <th field="IN_BILLNO" width="80" hidden="true">入库单号</th>
                <th field="OUT_BILLNO" width="80" hidden="true">出库单号</th>
                <th field="STATE" width="80" hidden="true">状态代码</th>
                <th field="STATENAME" width="60" >状态</th>
                <th field="OPERATER" width="80">操作人员</th>
                <th field="OPERATE_DATE" width="90">操作日期</th>
                <th field="CHECKER" width="80">审核人员</th>
                <th field="CHECK_DATE" width="90">审核日期</th>
               
            </tr>
        </thead>
    </table>
</div>
<div region="south" split="true" border="false" style="height: 250px; border-top-style: solid; border-top-width: 1px; border-top-color: 99BBE8;">
    <table class="easyui-datagrid" border="false" singleSelect="true" id="SubDetails" url="" pageSize="50"
        fit="true" fitColumns="true"  pagination="true" rownumbers="true" striped="true">
        <thead>
            <tr>
                <th field="BILL_NO" width="100">单据编号</th>
                <th field="ITEM_NO" width="80" >序号</th>
                <th field="PRODUCT_CODE" width="80" >产品代码</th>
                <th field="PRODUCT_NAME" width="80" >产品名称</th>
                <th field="YEARS" width="80" >年份</th>
                <th field="GRADE_NAME" width="80" >等级</th>
                <th field="STYLE_NAME" width="80" >形态</th>
                <th field="ORIGINAL_NAME" width="80" >原产地</th>
                <th field="CATEGORY_NAME" width="80" >类别</th>
                <th field="WEIGHT" width="80">标准重量</th>
                <th field="REAL_WEIGHT" width="80">实际重量</th>
                <th field="PACKAGE_COUNT" width="80">包数</th>
                <th field="NC_COUNT" width="80">NC包数</th>
            </tr>
        </thead>
    </table>
</div>